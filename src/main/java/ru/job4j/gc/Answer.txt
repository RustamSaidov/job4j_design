Наш объект класса User состоит из 4 переменных – двух ссылочных и двух примитивных.
Посчитаем сколько весит пустой объект:
Объект класса User
Заголовок: 8 байт
Поле int: 4 байта * 1 == 4 байта
Поле long: 8 байт * 1 == 8 байта
Ссылочная переменная на объект String(поле name): 8 байт (64 разрядная система)
Ссылочная переменная на объект String(поле email): 8 байт (64 разрядная система)
Выравнивание для кратности 4 байта
Итого: 40 байт (без учета занимаемой памяти полей String)

    Объект класса String (name) (… суммарно 40 байт…)
    Заголовок: 8 байт
    Поля int: 4 байта * 3 == 12 байт
    Ссылочная переменная на объект массива: 4 байта
    Итого: 24 байта

        Массив
        Заголовок: 8 байт + 4 байта на длину массива == 12 байт
        Примитивы char: 2 байта * 0 == 0 байт
        Выравнивание для кратности 8 : 4 байта
        Итого: 16 байт

    Объект класса String (email) (… суммарно 40 байт…)
    …
    …

ИТОГО пустой объект класса User с учетом дочерних объектов весит 40+40+40=120 байт.

В примере я буду добавлять значения имени User состоящие из восьми знаков (каждый из которых занимает в массиве еще 2 байта), то есть объем памяти каждого объекта вырастет и составит 120+16=136 байт.

Я выставил значение -Xmx4m -Xms4m.
Перед началом создания объектов у меня показывало следующее значение свободной и полной памяти кучи:
=== Environment state ===
Free: 2
Total: 4
Max: 4
Запустил цикл. После прохождения примерно 2550 шагов, на каждом из которых создавался новый объект, сборщик мусора начинает удалять некоторые объекты.
136 байт *2550 = 346 800 байт или 338 килобайт, что составляет 1/6 от 2 Мб изначального свободного объема памяти.
